---
conversation_id: "68d3566b-30b0-832e-9a76-874db478d233"
title: "インフラ系の指示書"
create_time: 1758680752.480222
update_time: 1758681189.339145
language_guess: "en"
num_messages: 10
part_index: 1
part_count: 1
---

### user — 2025-09-24T02:25:52.260186+00:00

インフラ系の人たちはinstructions.mdにガッチリ事前指示をかいてる

### assistant — 2025-09-24T02:25:52.355235+00:00

_(empty)_

### assistant — 2025-09-24T02:25:52.367489+00:00

やあ、司令！  
確かにインフラ系の人たちって **instructions.md** にがっちり事前指示を詰め込みますね。  

これは典型的に「**オペレーションを人に依存させない文化**」から来ていて、理由はいくつかあります：

---

### なぜインフラ系は instructions.md を重視するか
1. **再現性の確保**  
   - 環境構築やトラブル対応を誰がやっても同じ手順で再現できるようにする。  
   - 「手順が属人化 → 事故の温床」になるのを嫌う。

2. **変更管理と責任の明確化**  
   - コードと同じく Git でレビュー・履歴管理が効く。  
   - 「この手順は誰が、いつ、どう修正したのか」が追跡可能になる。

3. **オンボーディングと教育**  
   - 新人や別チームでも instructions.md を読むだけで最低限の作業ができる。  
   - 人的サポートを減らし、教育コストを抑えられる。

4. **インシデント対応の即応性**  
   - 夜中に呼び出されても、instructions.md があることで安心。  
   - マニュアル化＝プレッシャー軽減にもつながる。

---

### 書かれる内容の典型例
- **初期セットアップ**（OS依存パッケージ、Docker準備、認証キー登録方法）
- **起動・停止手順**（`docker compose up -d` からログ確認まで）
- **環境変数・設定ファイル**の説明
- **リカバリ手順**（volumes消す、再作成、キャッシュクリアなど）
- **よくある失敗パターンと対処法**（Port競合、StateDir、メモリ不足など）

---

### ソフトウェア系との違い
- アプリ開発だと「コードで表現できることはコードに寄せる」ので instructions.md が薄くなりがち。  
- でもインフラは「外部環境（OS、ネットワーク、クラウドサービス）」に依存するので、**コード化しきれない部分**を instructions.md に残す。

---

司令のOSSだと、  
- **infra/** 配下に `instructions.md` を置いて「docker起動・リセット手順／ksqlDBのバージョンアップ手順／RocksDBの注意点」  
- **docs/** 配下には「OSSユーザー向けの手順書」  

と分けるのが良さそう。  

---

👉 司令のプロジェクトでも「infra instructions.md」を厚めにしておくと、Codexや他のAIにもトラブルシューティングを引き継ぎやすくなりますよ。  

質問ですが、司令のOSSでは **infra系のinstructions.md** を「人間運用向け」に書きますか？ それとも「AIが読む前提」でAIフレンドリーに書き直したいですか？  

（例えば「リセット→起動→ログ確認」の手順をCLIコマンドだけでなく、**意図**と**期待するログ出力**まで書くとか。）

### system — 2025-09-24T02:25:52.480222+00:00

_(empty)_

### system — 2025-09-24T02:25:52.480222+00:00

_(empty)_

### system — 2025-09-24T02:25:52.544111+00:00

_(empty)_

### user — 2025-09-24T02:26:10.379147+00:00

_(empty)_

### user — 2025-09-24T02:32:57.537711+00:00

Codex cliがinstructions.md作ってくれる

### assistant — 2025-09-24T02:32:57.682619+00:00

そうそう！Codex CLIにやらせると、`instructions.md` も自動生成できますよ。  
実際にはこんな流れになります：

---

### Codex CLIでinstructions.mdを作らせる流れ
1. **依頼文を与える**  
   例えば：
   ```text
   プロジェクトのinfraディレクトリに配置する instructions.md を作成してください。
   目的は「docker-composeを使った環境起動とリセット手順」「ksqldb/kafka/rocksdbの注意点」「トラブル発生時のリカバリ手順」を人間が再現できるようにすることです。
   想定読者はインフラ担当者（エンジニア経験あり）。
   Markdown形式で、見出し・コードブロック・箇条書きを用いること。
   ```
   こうすると、かなり実用的なドラフトが出てきます。

2. **Codex出力を人間がレビュー**  
   - コマンドが環境依存（Linux / Windows / Mac）になっていないか？  
   - volumeパスやenv変数が実際と合っているか？  
   - 「こうなるはず」の出力例（ログ抜粋）を補うか？

3. **プロジェクトに組み込む**  
   - `/infra/instructions.md` として保存  
   - 将来的に「AIフレンドリー」仕様に寄せるなら、**意図＋期待値**を明示しておくのがベスト。  
     例：  
     ```markdown
     ### Step 3: Reset environment
     Run:
     ```bash
     docker compose down -v
     docker compose up -d
     ```
     **Expected log (ksqldb-server)**  
     ```
     INFO KSQL service ID: ksql_service_xxxxx
     ```
     ```

---

### 実際の使い道
- **人間がそのまま参照**（オンボーディング／夜間トラブル対応）  
- **Codexや他AIに再入力**（「この手順に従って再実行して」って投げられる）  
- **CI/CDとの接着剤**（instructionsをスクリプト化するときの設計ドキュメント）

---

👉 司令の場合だと、`docker-compose.yaml` と `reset.ps1` / `reset.sh` の周辺を Codexに解説させて、**「infra instructions.md の初版」**を吐かせるのが一番効率的です。  

質問ですが、司令はこの `instructions.md` を  
- **まず人間向け（インフラ担当者想定）** に厚めに作りたいですか？  
- それとも **AIが読みやすい形式（意図＋期待ログ）** を優先したいですか？
