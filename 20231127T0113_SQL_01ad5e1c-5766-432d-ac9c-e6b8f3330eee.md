---
conversation_id: "01ad5e1c-5766-432d-ac9c-e6b8f3330eee"
title: "SQL接続を構成"
create_time: 1701047615.699471
update_time: 1701047628.635801
language_guess: "en"
num_messages: 4
part_index: 1
part_count: 1
---

### system — 2023-11-27T01:13:35.699471+00:00

_(empty)_

### user — 2023-11-27T01:13:35.700012+00:00

以下のコードで最初にSQLへのコネクションを作成するにはusing ContosoUniversity.Data;
using Microsoft.EntityFrameworkCore;
using Microsoft.AspNetCore.Builder;
using Microsoft.AspNetCore.Hosting;
using Microsoft.Extensions.Configuration;
using Microsoft.Extensions.DependencyInjection;
using Microsoft.Extensions.Hosting;

namespace ContosoUniversity
{
    public class Startup
    {
        public Startup(IConfiguration configuration)
        {
            Configuration = configuration;
        }

        public IConfiguration Configuration { get; }

        public void ConfigureServices(IServiceCollection services)
        {
            services.AddDbContext<SchoolContext>(options =>
                options.UseSqlServer(Configuration.GetConnectionString("DefaultConnection")));

            services.AddControllersWithViews();
        }

### assistant — 2023-11-27T01:13:47.564047+00:00

このコードでは、`services.AddDbContext<SchoolContext>(options => options.UseSqlServer(Configuration.GetConnectionString("DefaultConnection")));`の部分で、`SchoolContext`という名前のデータベースコンテキストを作成し、それに対してSQL Serverを使用するように設定しています。

具体的には、`Configuration.GetConnectionString("DefaultConnection")`で、`appsettings.json`などの設定ファイルから"DefaultConnection"という名前の接続文字列を取得し、それを使用してSQL Serverへの接続を構成しています。

コネクションを作成する際に、`Startup.cs`の`ConfigureServices`メソッドが呼び出され、ここでデータベースコンテキストの設定などが行われます。このメソッドはアプリケーションが起動するときに実行され、依存性の注入などを設定するのに使います。

なお、具体的なデータベースコンテキストや接続文字列の設定は、プロジェクト内の`appsettings.json`や`appsettings.Development.json`などの設定ファイルに記述されることが一般的です。以下は、設定ファイルの例です。

```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Server=(localdb)\\mssqllocaldb;Database=ContosoUniversity;Trusted_Connection=True;MultipleActiveResultSets=true"
  },
  // 他の設定...
}
```

この例では、`DefaultConnection`という名前の接続文字列が含まれています。この接続文字列には、SQL Serverの接続情報が含まれています。データベース名や接続情報は、実際の環境に合わせて変更する必要があります。
