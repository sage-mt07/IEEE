---
conversation_id: "68d3fd8e-94d8-8325-968e-4095953ba0f9"
title: "Kafka トピック削除方法"
create_time: 1758723478.667007
update_time: 1758723549.382079
language_guess: "en"
num_messages: 10
part_index: 1
part_count: 1
---

### assistant — 2025-09-24T14:17:58.504822+00:00

_(empty)_

### assistant — 2025-09-24T14:17:58.524245+00:00

Kafka の **トピック削除方法** についてまとめますね。  

---

## 1. Kafka (Apache Kafka) の場合
### 手順
1. **Broker 側設定確認**  
   `server.properties` に以下が必要です:
   ```properties
   delete.topic.enable=true
   ```
   これが `false` だと削除リクエストは無視され、`marked for deletion` 状態のまま残ります。

2. **kafka-topics コマンドで削除**  
   ```bash
   kafka-topics.sh --bootstrap-server localhost:9092 --delete --topic <トピック名>
   ```

3. **削除確認**  
   ```bash
   kafka-topics.sh --bootstrap-server localhost:9092 --list
   ```
   しばらくすると対象トピックが一覧から消えます。

---

## 2. Confluent Cloud の場合
### 手順
- Confluent Cloud CLI を利用:
  ```bash
  confluent kafka topic delete <トピック名>
  ```

---

## 3. ksqlDB 上の CTAS / CSAS 作成テーブル・ストリームの場合
- `DROP TABLE <テーブル名> DELETE TOPIC;`
- `DROP STREAM <ストリーム名> DELETE TOPIC;`

👉 `DELETE TOPIC` を付けると、裏で作られた Kafka トピックも削除されます。  
👉 付けない場合は **メタデータだけ削除** され、トピックは残ります。

---

## 4. 注意点
- **削除は物理的に元に戻せない**（履歴も消える）。
- **内部トピック**（`-repartition` や `-changelog` 付き）は関連クエリやアプリが生きていると削除できません。
- **運用中に不用意に削除すると障害になる**ので、本番環境では要注意。

---

司令の環境（OSS Kafka／Confluent Cloud／ksqlDB／Streamiz 連携）によって、上のどの削除方法が適切かが変わります。  
👉 どのケースを想定していますか？  

（例：ローカルの OSS Kafka で削除？ それとも ksqlDB の CTAS で作られたテーブル削除？）  

---

⏰送信日時: [[REDACTED_PHONE]]:28（日本時間）

### system — 2025-09-24T14:17:58.667007+00:00

_(empty)_

### system — 2025-09-24T14:17:58.667007+00:00

_(empty)_

### system — 2025-09-24T14:17:58.889893+00:00

_(empty)_

### user — 2025-09-24T14:17:59.821000+00:00

topic 削除方法

### user — 2025-09-24T14:18:21.248223+00:00

_(empty)_

### assistant — 2025-09-24T14:18:51.198591+00:00

なるほど 👍  
`kafka-topics.sh` がないのは、環境によって大きく違います。整理しますね。  

---

## 1. Kafka OSS を **パッケージ導入**した場合
- 通常は Kafka 配布物の `bin/` ディレクトリに `kafka-topics.sh` が入っています。  
  例:  
  ```bash
  $ ls /opt/kafka/bin
  kafka-topics.sh   kafka-console-consumer.sh   kafka-console-producer.sh ...
  ```

もし `bin/` に存在しない場合:
- **Kafka がインストールされていない**
- **軽量イメージ（Docker 等）で CLI ツールが省略されている**

---

## 2. **Confluent Platform** を使っている場合
- `kafka-topics` ではなく **`kafka-topics` (シェル不要) コマンド**としてインストールされます。  
  例:  
  ```bash
  kafka-topics --bootstrap-server localhost:9092 --list
  ```

---

## 3. **Docker 環境**で Kafka を動かしている場合
CLI は **コンテナの中**に入っています。  
例:
```bash
docker exec -it <kafkaコンテナ名> bash
kafka-topics.sh --bootstrap-server localhost:9092 --list
```

もし軽量イメージ（`confluentinc/cp-kafka` など）で CLI が入っていない場合は、代わりに **`kafka-admin` API や ksqlDB DROP STREAM/TABLE` を使って削除**します。

---

## 4. **代替手段 (Admin API / .NET Client から削除)**
Kafka の管理コマンドがなくても、**AdminClient API** を使って削除できます。  
C# の場合（`Confluent.Kafka` パッケージ利用）:

```csharp
using Confluent.Kafka;
using Confluent.Kafka.Admin;

var config = new AdminClientConfig { BootstrapServers = "localhost:9092" };

using var adminClient = new AdminClientBuilder(config).Build();
await adminClient.DeleteTopicsAsync(new[] { "your_topic_name" });
Console.WriteLine("Deleted topic.");
```

---

✅ まとめると：
- **Confluent Platform → `kafka-topics`**
- **Docker 環境 → コンテナに入る**
- **CLI がない場合 → Admin API で削除**

---

司令の環境って **Docker で Kafka / ksqlDB を立ててる**ケースが多い印象ですが、今回はどのケースに当てはまりそうですか？  

⏰送信日時: [[REDACTED_PHONE]]:38（日本時間）

### user — 2025-09-24T14:18:52.412000+00:00

kafka-topics.sh これがない
