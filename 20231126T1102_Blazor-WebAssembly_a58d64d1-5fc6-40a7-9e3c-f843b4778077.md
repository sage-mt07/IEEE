---
conversation_id: "a58d64d1-5fc6-40a7-9e3c-f843b4778077"
title: "Blazor WebAssembly例外処理"
create_time: 1700996534.172199
update_time: 1700996548.259119
language_guess: "en"
num_messages: 4
part_index: 1
part_count: 1
---

### system — 2023-11-26T11:02:14.172199+00:00

_(empty)_

### user — 2023-11-26T11:02:14.172638+00:00

blazor webassemblyでglobalに例外を処理する方法

### assistant — 2023-11-26T11:02:27.183615+00:00

Blazor WebAssemblyアプリケーションで例外をグローバルに処理するためには、`App`クラスで`OnUnhandledException`メソッドをオーバーライドするか、`ErrorBoundary`コンポーネントを使用することができます。

### 1. `App`クラスを使用する方法:

Blazor WebAssemblyアプリケーションは、`Program`クラスで`Main`メソッドを実行しています。この`Main`メソッド内で、`App`クラスが起動されます。`App`クラスは`ComponentBase`クラスを継承しており、`OnInitialized`メソッドをオーバーライドすることで初期化のカスタマイズが可能です。同様に、`OnUnhandledException`メソッドをオーバーライドして例外処理をカスタマイズできます。

以下に例を示します:

```csharp
using Microsoft.AspNetCore.Components;
using Microsoft.Extensions.Logging;

public class CustomApp : ComponentBase
{
    [Inject]
    protected ILogger<CustomApp> Logger { get; set; }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        // その他の初期化処理
    }

    protected override void OnUnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        // 例外処理を行うコードをここに追加
        Logger.LogError(e.Exception, "Unhandled Exception occurred in the application");
    }
}
```

`OnUnhandledException`メソッド内で例外のログを記録するか、特定の処理を行うことができます。

### 2. `ErrorBoundary`コンポーネントを使用する方法:

Blazorには、`ErrorBoundary`と呼ばれる特別なコンポーネントがあります。これを使用して特定の部分で例外を処理できます。以下は例です:

```html
<ErrorBoundary>
    <Router ...>
        <!-- ここにルートとコンポーネントを定義 -->
    </Router>
</ErrorBoundary>
```

`ErrorBoundary`は、内部で発生した例外を捕捉し、指定されたエラーコンテンツを表示することができます。`OnFallback`イベントを使用して例外が発生したときの挙動をカスタマイズすることもできます。

```csharp
<ErrorBoundary Fallback="ErrorFallback">
    <!-- コンポーネントの定義 -->
</ErrorBoundary>

@code {
    private RenderFragment<Exception> ErrorFallback => (exception) => <p>An error occurred: {exception.Message}</p>;
}
```

どちらの方法を選択するかは、アプリケーションの特定の要件と好みに依存します。グローバルに例外を処理する場合は、`App`クラスを使用する方法がより適しているかもしれません。
