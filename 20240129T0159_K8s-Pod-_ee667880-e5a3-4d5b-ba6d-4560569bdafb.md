---
conversation_id: "ee667880-e5a3-4d5b-ba6d-4560569bdafb"
title: "K8s Pod 環境変数設定方法"
create_time: 1706493570.921528
update_time: 1706493616.293418
language_guess: "en"
num_messages: 4
part_index: 1
part_count: 1
---

### system — 2024-01-29T01:59:30.921528+00:00

_(empty)_

### user — 2024-01-29T01:59:30.923189+00:00

K8sのpodを構成するymlファイルに環境変数で階層構造を持つキーを設定する方法

### assistant — 2024-01-29T02:00:14.944156+00:00

KubernetesのPodを構成するYAMLファイルにおいて、環境変数で階層構造を持つキーを設定する方法はいくつかありますが、一般的には以下の方法があります。

1. **環境変数として直接設定する**: 階層構造を持つキーを環境変数として設定する際には、通常、階層を表すために特定の文字（たとえばアンダースコア `_`）を使用して階層を平坦化します。

2. **ConfigMapやSecretを使用する**: 複雑な構造を持つ設定情報は、ConfigMapやSecretを使用して管理することが推奨されます。これらはキーバリューの形でデータを保存し、それらをPodの環境変数としてマップすることができます。

3. **ファイルとしてマウントし、アプリケーションで読み込む**: ConfigMapやSecretをファイルとしてPodにマウントし、アプリケーション起動時にこれらのファイルから設定を読み込む方法です。JSONやYAML形式の設定ファイルを使用して、階層構造をそのまま保持することができます。

以下は、環境変数として階層構造を持つキーを設定する基本的な例です。

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: example-pod
spec:
  containers:
  - name: example-container
    image: example-image
    env:
    - name: DATABASE_HOST
      value: "example-host"
    - name: DATABASE_PORT
      value: "1234"
```

ここでは`DATABASE_HOST`と`DATABASE_PORT`という2つの環境変数を設定しています。これらは階層構造を持たない単純な例ですが、階層構造が必要な場合は、キーの名前に階層を表す文字を含めることが一般的です（例：`DATABASE_HOST_MASTER`と`DATABASE_HOST_SLAVE`）。
