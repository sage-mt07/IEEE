---
conversation_id: "68645bc1-85c0-8007-a855-19bb86fac8f9"
title: "テスト実行抑止方法"
create_time: 1751407553.864065
update_time: 1751409700.59333
language_guess: "en"
num_messages: 14
part_index: 1
part_count: 1
---

### system — 2025-07-01T22:05:53.864065+00:00

_(empty)_

### system — 2025-07-01T22:05:53.864065+00:00

_(empty)_

### user — 2025-07-01T22:05:53.864065+00:00

_(empty)_

### assistant — 2025-07-01T22:05:54.276350+00:00

# Read the ci.yml file
path = '/mnt/data/ci.yml'
try:
    with open(path, 'r', encoding='utf-8') as f:
        content = f.read()
        print(content)
except Exception as e:
    print(f"Error: {e}")

### user — 2025-07-01T22:05:54.277000+00:00

/physicalTests 以下のテストコードがpullrequestのたびにテスト実行エラーになる
このテストの実行を抑止したい

### tool — 2025-07-01T22:05:59.196636+00:00

name: .NET CI

on:
  push:
    branches: [ main ]
    paths:
      - 'src/**'
      - 'tests/**'    
  pull_request:
    branches: [ main ]
    paths:
      - 'src/**'
      - 'tests/**'

jobs:
  build-test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup .NET
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: 8.0.x

    - name: Restore dependencies
      run: dotnet restore

    - name: Build
      run: dotnet build --configuration Release --no-restore

    - name: Test with coverage
      run: dotnet test --configuration Release --no-build --collect:"XPlat Code Coverage"

    - name: Install ReportGenerator
      run: dotnet tool install --global dotnet-reportgenerator-globaltool

    - name: Generate HTML report
      run: reportgenerator -reports:"**/coverage.cobertura.xml" -targetdir:"coverage-report"

    - name: Upload coverage report as artifact
      uses: actions/upload-artifact@v4
      with:
        name: coverage-report
        path: coverage-report

    - name: Upload cobertura xml as artifact
      uses: actions/upload-artifact@v4
      with:
        name: coverage-xml
        path: ./tests/TestResults/**/*.cobertura.xml

### assistant — 2025-07-01T22:05:59.654074+00:00

# Print full content
print(content)

### tool — 2025-07-01T22:06:02.103314+00:00

name: .NET CI

on:
  push:
    branches: [ main ]
    paths:
      - 'src/**'
      - 'tests/**'    
  pull_request:
    branches: [ main ]
    paths:
      - 'src/**'
      - 'tests/**'

jobs:
  build-test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v4

    - name: Setup .NET
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: 8.0.x

    - name: Restore dependencies
      run: dotnet restore

    - name: Build
      run: dotnet build --configuration Release --no-restore

    - name: Test with coverage
      run: dotnet test --configuration Release --no-build --collect:"XPlat Code Coverage"

    - name: Install ReportGenerator
      run: dotnet tool install --global dotnet-reportgenerator-globaltool

    - name: Generate HTML report
      run: reportgenerator -reports:"**/coverage.cobertura.xml" -targetdir:"coverage-report"

    - name: Upload coverage report as artifact
      uses: actions/upload-artifact@v4
      with:
        name: coverage-report
        path: coverage-report

    - name: Upload cobertura xml as artifact
      uses: actions/upload-artifact@v4
      with:
        name: coverage-xml
        path: ./tests/TestResults/**/*.cobertura.xml

### assistant — 2025-07-01T22:06:02.574006+00:00

やあ、いらっしゃい！問題のテストだけ飛ばすには、CI の “dotnet test” ステップにフィルターを追加するのが手軽です。以下のように `--filter` オプションで PhysicalTests を除外してみてください。

```diff
 jobs:
   build-test:
     steps:
       - uses: actions/checkout@v3
       - name: Setup .NET
         uses: actions/setup-dotnet@v3
         with:
           dotnet-version: '8.0.x'
       - name: Restore
         run: dotnet restore
       - name: Build
         run: dotnet build --no-restore --configuration Release
-      - name: Test
-        run: dotnet test --no-build --configuration Release
+      - name: Test (skip PhysicalTests)
+        run: |
+          # 全テストから physicalTests フォルダーのテストを除外
+          dotnet test --no-build --configuration Release \
+            --filter "FullyQualifiedName!~physicalTests"
       - name: Generate HTML report
         run: reportgenerator -reports:"**/coverage.cobertura.xml" -targetdir:"coverage-report"
```

**ポイント**  
- `FullyQualifiedName!~physicalTests` は、テストの名前空間やクラス名に “physicalTests” が含まれるものを除外します。  
- もしクラスやメソッド名ではなく、テストプロジェクト単位で除外したい場合は、テストプロジェクトのファイル名に特徴的な文字列を含め、同様にフィルターを設定できます。  
- さらに細かく制御したい場合は、テストの `[TestCategory("Physical")]` 属性を使い、`--filter "TestCategory!=Physical"` のようにする方法もあります。

これで PR 時の physicalTests 実行エラーを回避できるはずです。  
お試しください！  [[REDACTED_PHONE]]:23 (JST)

### assistant — 2025-07-01T22:06:05.707818+00:00

_(empty)_

### assistant — 2025-07-01T22:06:05.708054+00:00

_(empty)_

### assistant — 2025-07-01T22:06:08.698260+00:00

_(empty)_

### assistant — 2025-07-01T22:06:08.698479+00:00

_(empty)_
