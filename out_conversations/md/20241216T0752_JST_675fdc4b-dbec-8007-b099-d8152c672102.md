---
conversation_id: "675fdc4b-dbec-8007-b099-d8152c672102"
title: "JSTエポック変換"
create_time: 1734335564.16969
update_time: 1734335593.639993
language_guess: "en"
num_messages: 5
part_index: 1
part_count: 1
---

### system — 2024-12-16T07:52:44.169690+00:00

_(empty)_

### user — 2024-12-16T07:52:44.173230+00:00

C#でjstのエポック表記10桁+マイクロ秒6桁を　datetimeoffsetへ変換

### assistant — 2024-12-16T07:53:12.350129+00:00

_(empty)_

### assistant — 2024-12-16T07:53:12.350256+00:00

C#でJST（日本標準時）のエポック表記（10桁のUNIXタイムスタンプ）とマイクロ秒（6桁）を `DateTimeOffset` に変換するには、以下のようなコードを使用できます。

```csharp
using System;
using System.Globalization;

class Program
{
    static void Main()
    {
        // 入力: UNIXタイムスタンプ (10桁) とマイクロ秒 (6桁)
        string epochSeconds = "[[REDACTED_PHONE]]"; // 例: 2024/12/16 00:00:00 JST
        string microseconds = "[[REDACTED_PHONE]]";

        // UNIXタイムスタンプを秒単位で変換
        long seconds = long.Parse(epochSeconds);
        DateTimeOffset dateTime = DateTimeOffset.FromUnixTimeSeconds(seconds);

        // マイクロ秒をタイムスパンに変換
        int micros = int.Parse(microseconds);
        TimeSpan microsecondsSpan = TimeSpan.FromTicks(micros * 10); // 1マイクロ秒 = 10Ticks

        // タイムスパンを加算してJSTに変換
        DateTimeOffset jstDateTime = dateTime.Add(microsecondsSpan).ToOffset(TimeSpan.FromHours(9));

        // 結果を出力
        Console.WriteLine($"JST: {jstDateTime:yyyy-MM-dd HH:mm:ss.ffffff zzz}");
    }
}
```

### コードのポイント
1. **UNIXタイムスタンプの変換**  
   `DateTimeOffset.FromUnixTimeSeconds` を使用して10桁のエポック秒を変換します。
2. **マイクロ秒の追加**  
   マイクロ秒をタイムスパン（`TimeSpan`）に変換して、エポック秒に加算します。
3. **JSTへの変換**  
   `.ToOffset(TimeSpan.FromHours(9))` を使用して、UTCからJST（UTC+9）に変換します。

### 実行結果（例）
入力が `[[REDACTED_PHONE]]`（2024/12/16 00:00:00 JST）と `[[REDACTED_PHONE]]`（マイクロ秒）の場合、出力は次のようになります。

```
JST: [[REDACTED_PHONE]]:00:[[REDACTED_PHONE]] +09:00
```
