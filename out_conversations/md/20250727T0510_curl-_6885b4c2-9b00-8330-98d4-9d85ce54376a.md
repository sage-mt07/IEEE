---
conversation_id: "6885b4c2-9b00-8330-98d4-9d85ce54376a"
title: "curl でスキーマ確認"
create_time: 1753593033.739637
update_time: 1753593069.193665
language_guess: "en"
num_messages: 6
part_index: 1
part_count: 1
---

### assistant — 2025-07-27T05:10:33.466886+00:00

_(empty)_

### assistant — 2025-07-27T05:10:33.480641+00:00

やあ、いらっしゃい！困ってること、気になること、なんでも聞いてみてください〜  
**（送信日時：[[REDACTED_PHONE]]:18 JST）**

---

### ksqlDB で AVRO スキーマの -key, -value 登録情報を curl で確認する方法

**前提：**
- `-key`, `-value` というのは Kafka Schema Registry で管理される「サブジェクト名」の末尾に付くもの（例：`orders-key`, `orders-value`）。
- これらのスキーマ情報は Schema Registry の REST API で確認できる。

---

#### 1. サブジェクト一覧の取得

```bash
curl http://localhost:8081/subjects
```
> 例:  
```json
["orders-key", "orders-value", ...]
```

---

#### 2. サブジェクトごとのスキーマ内容取得

例えば `orders-key` のスキーマ内容を確認：

```bash
curl http://localhost:8081/subjects/orders-key/versions/latest
```
> 例:  
```json
{
  "subject": "orders-key",
  "version": 1,
  "id": 42,
  "schema": "{...Avro schema...}"
}
```

`orders-value` も同様に確認：

```bash
curl http://localhost:8081/subjects/orders-value/versions/latest
```

---

#### 3. サブジェクト名のルール

- 通常は「`<topic名>-key`」「`<topic名>-value`」というサブジェクトが自動作成される。
- ksqlDB や Schema Registry の設定によっては命名ルールが異なる場合あり。

---

#### 4. すべてのバージョンを見る場合

```bash
curl http://localhost:8081/subjects/orders-key/versions
```

---

#### 5. 補足

- REST API のエンドポイント（`8081`）は Schema Registry のものです（Kafka とは別ポート）。
- 認証やSSLが必要な場合は `-u`（ユーザー:パスワード）や `--cacert` オプションを適宜追加。

---

**まとめ例：orders トピックの -key/-value 情報取得**

```bash
curl http://localhost:8081/subjects/orders-key/versions/latest
curl http://localhost:8081/subjects/orders-value/versions/latest
```

---

必要に応じて、他のトピック名も同様のパターンで確認できます。  
追加質問やサンプル出力の詳細が欲しければ気軽にどうぞ！

---

**（送信日時：[[REDACTED_PHONE]]:18 JST）**

### system — 2025-07-27T05:10:33.739637+00:00

_(empty)_

### user — 2025-07-27T05:10:33.739637+00:00

_(empty)_

### user — 2025-07-27T05:10:34.385000+00:00

curl で -key -valueの登録情報を確認する方法教えて
