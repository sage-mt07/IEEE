---
conversation_id: "67d0d5e5-cd98-8007-8371-4e9e00d32645"
title: "KSQL 日付 数値 文字列変換"
create_time: 1741739494.257999
update_time: 1741739504.760564
language_guess: "en"
num_messages: 5
part_index: 1
part_count: 1
---

### system — 2025-03-12T00:31:34.257999+00:00

_(empty)_

### user — 2025-03-12T00:31:34.266311+00:00

Ksql avro 前提で数値　日付を文字列にする関数

### assistant — 2025-03-12T00:31:34.397741+00:00

`ksqlDB` で Avro フォーマットを前提に数値や日付を文字列に変換するには、以下の関数を使用します。

### 1. **数値 → 文字列**
数値を文字列に変換するには `CAST()` または `FORMAT_NUMBER()` を使用できます。

```sql
SELECT CAST(my_number AS STRING) FROM my_stream;
```
または、フォーマットを指定する場合:
```sql
SELECT FORMAT_NUMBER(my_number, '###,###.##') FROM my_stream;
```

### 2. **日付 → 文字列**
日付やタイムスタンプを文字列に変換するには `FORMAT_DATE()` や `FORMAT_TIMESTAMP()` を使用します。

```sql
SELECT FORMAT_DATE(my_date, 'yyyy-MM-dd') FROM my_stream;
```

タイムスタンプの場合:
```sql
SELECT FORMAT_TIMESTAMP(my_timestamp, 'yyyy-MM-dd HH:mm:ss') FROM my_stream;
```

### 3. **Kafka の Avro 互換性**
Avro フォーマットでは、デフォルトで `STRING` 型に変換されますが、スキーマレジストリで `STRING` にマッピングすることを確認してください。

**Avro スキーマの例**
```json
{
  "type": "record",
  "name": "my_record",
  "fields": [
    {"name": "my_number", "type": "int"},
    {"name": "my_date", "type": {"type": "int", "logicalType": "date"}}
  ]
}
```
この場合、`FORMAT_TIMESTAMP` や `FORMAT_DATE` を使用すると適切に変換できます。

以上の方法で、Avro スキーマを前提に数値や日付を文字列に変換できます。

### assistant — 2025-03-12T00:31:42.990456+00:00

_(empty)_
