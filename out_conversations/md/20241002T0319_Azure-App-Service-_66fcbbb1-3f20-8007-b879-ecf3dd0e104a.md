---
conversation_id: "66fcbbb1-3f20-8007-b879-ecf3dd0e104a"
title: "Azure App Service ブロッキング確認方法"
create_time: 1727839153.459777
update_time: 1727839186.864992
language_guess: "en"
num_messages: 5
part_index: 1
part_count: 1
---

### system — 2024-10-02T03:19:13.459777+00:00

_(empty)_

### user — 2024-10-02T03:19:13.467682+00:00

azure app service containerでブロッキング事象を確認する方法

### assistant — 2024-10-02T03:19:45.483391+00:00

_(empty)_

### assistant — 2024-10-02T03:19:45.483510+00:00

Azure App Serviceでコンテナがブロッキングしている事象を確認するための方法はいくつかあります。以下は一般的な確認手順です。

### 1. **Azure Portalの診断と解決**
   - Azure Portalにアクセスし、対象のApp Serviceを選択します。
   - 「診断と解決 (Diagnose and Solve Problems)」ブレードを利用します。ここには一般的なパフォーマンス問題やエラーに関する診断ツールが用意されており、ブロッキングやスローダウンの原因を特定できる場合があります。

### 2. **ログの確認**
   - **App Service Logs**：App Service内のコンテナログやWebサーバーログを有効化し、具体的なエラーメッセージや遅延の原因を確認します。
     - Azure Portalから「App Service Logs」設定でログを有効化できます。
     - ログファイルをFTPまたはAzure Storageに保存し、詳細な解析が可能です。
   - **Container Logs**：コンテナ内で実行されているアプリケーションのログも確認します。標準出力（stdout）とエラーログ（stderr）の両方が確認可能です。

### 3. **Application Insightsの活用**
   - Application Insightsを有効にすることで、詳細なトレース、リクエスト、依存関係、例外、メトリックの監視が可能です。特に「Request Timeline」や「Dependency Call Duration」などのビューを確認することで、ブロッキングが発生している可能性のある箇所を特定できます。
   - Application Insightsの「Live Metrics」機能を使うと、リアルタイムでメトリクスやリクエストの処理状態を監視できます。

### 4. **診断ログの確認**
   - **Kudu Diagnostic Console** (https://<app_name>.scm.azurewebsites.net/) にアクセスして、コンテナの診断ログやプロセスの状態を確認できます。
   - KuduでコンテナのプロセスID (PID) やメモリ・CPU使用状況も確認でき、ブロッキングの兆候を見つけるのに役立ちます。

### 5. **CPUおよびメモリのメトリクスの監視**
   - Azure Portalの「メトリクス」機能を利用して、App ServiceのCPUやメモリの使用状況を監視します。急激なリソース消費やスパイクがないかを確認することで、リソースの不足や過剰消費によるブロッキングが発生していないかを確認します。

### 6. **Azure Monitor Alertsの設定**
   - App Serviceに対してアラートを設定し、CPU使用率や応答時間、リクエスト失敗率が閾値を超えた場合に通知を受け取れるようにします。これにより、ブロッキングが発生した際に即座に検知できるようになります。

### 7. **診断と負荷テスト**
   - Azure Load Testingや他の負荷テストツールを使い、App Serviceへのリクエストを意図的に増やし、ブロッキング事象が発生するかをシミュレーションすることで、ボトルネックを特定できます。

これらの方法を組み合わせて、Azure App Service内のコンテナでブロッキングが発生しているか、そしてその原因を特定することができます。
