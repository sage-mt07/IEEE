---
conversation_id: "670d60bb-2814-8007-b701-ca66c5bbef3a"
title: "クライアント証明書 401 エラー"
create_time: 1728929979.3249
update_time: 1728930004.992181
language_guess: "en"
num_messages: 5
part_index: 1
part_count: 1
---

### system — 2024-10-14T18:19:39.324900+00:00

_(empty)_

### user — 2024-10-14T18:19:39.328338+00:00

App Serviceでクライアント証明書が必要な場合401で返るのか

### assistant — 2024-10-14T18:20:03.245610+00:00

_(empty)_

### assistant — 2024-10-14T18:20:03.245753+00:00

はい、Azure App Serviceでクライアント証明書が必要な設定になっている場合、適切なクライアント証明書が提供されないと、サーバーはHTTPステータスコード「401 Unauthorized」を返すことがあります。これは、クライアント証明書が要求されているにもかかわらず、クライアントが証明書を提供しないか、提供された証明書が無効であるためです。

クライアント証明書を使用する設定を行う際、以下のポイントに注意が必要です。

1. **App Service 設定**  
   AzureポータルからApp Serviceの「TLS/SSL設定」内でクライアント証明書の「必要」に設定されている場合、サーバーは証明書を要求します。このとき、クライアント側で適切な証明書が提供されないと401エラーが発生します。

2. **証明書の有効性**  
   提供されるクライアント証明書が有効であり、サーバー側で信頼されているか確認する必要があります。証明書が不正な場合や、証明書チェーンが正しくない場合も401エラーが発生することがあります。

3. **クライアントの設定**  
   クライアント側では、適切なクライアント証明書をリクエストに添付するように設定されていることを確認する必要があります。たとえば、HTTPクライアントで証明書を追加する処理が適切に行われているかなど。

401エラーが発生している場合は、以下のチェックを行うと良いでしょう。

- クライアント証明書の設定が正しいか確認。
- クライアント証明書が正しく提供されているか検証。
- 証明書の有効期限や信頼性が問題ないか確認。
