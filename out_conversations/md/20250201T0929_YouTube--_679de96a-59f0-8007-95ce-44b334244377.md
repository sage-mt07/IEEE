---
conversation_id: "679de96a-59f0-8007-95ce-44b334244377"
title: "YouTube å±¥æ­´ è¦ç´„"
create_time: 1738402154.837324
update_time: 1738402463.773739
language_guess: "en"
num_messages: 11
part_index: 1
part_count: 1
---

### system â€” 2025-02-01T09:29:14.837324+00:00

_(empty)_

### user â€” 2025-02-01T09:29:14.843044+00:00

Youtubeã®å±¥æ­´ã‹ã‚‰èˆˆå‘³ã®ã‚ã‚Šãã†ãªå‹•ç”»ã®è¦ç´„ã‚’ä½œæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰

### assistant â€” 2025-02-01T09:30:11.603981+00:00

_(empty)_

### assistant â€” 2025-02-01T09:30:11.604175+00:00

YouTube ã®å±¥æ­´ã‹ã‚‰èˆˆå‘³ã®ã‚ã‚Šãã†ãªå‹•ç”»ã®è¦ç´„ã‚’ä½œæˆã™ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’ä½œæˆã™ã‚‹ã«ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ãŒå¿…è¦ã§ã™ã€‚

1. **YouTube ã®å±¥æ­´ã‚’å–å¾—**:  
   - YouTube ã®ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆï¼ˆGoogle Takeoutï¼‰ã‚’ä½¿ç”¨ã™ã‚‹  
   - YouTube Data API ã‚’ä½¿ã£ã¦å±¥æ­´ã‚’å–å¾—ã™ã‚‹ï¼ˆè¦ OAuth èªè¨¼ï¼‰

2. **å‹•ç”»ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—**:  
   - YouTube Data API ã‚’ä½¿ã£ã¦å‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«ã€èª¬æ˜ã€å†ç”Ÿå›æ•°ã€ã„ã„ã­æ•°ãªã©ã‚’å–å¾—ã™ã‚‹

3. **èˆˆå‘³ã®ã‚ã‚‹å‹•ç”»ã‚’ç‰¹å®š**:  
   - å±¥æ­´ã‹ã‚‰è¦–è´æ™‚é–“ã€å†ç”Ÿé »åº¦ã€ã‚¸ãƒ£ãƒ³ãƒ«ã”ã¨ã®å‚¾å‘ã‚’åˆ†æã™ã‚‹

4. **è¦ç´„ã‚’ä½œæˆ**:  
   - OpenAI API ã‚„ Hugging Face ã®ãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ã£ã¦è¦ç´„ã™ã‚‹

---

### å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
pip install google-auth google-auth-oauthlib google-auth-httplib2 googleapiclient openai pandas
```

---

### ã‚³ãƒ¼ãƒ‰ã®æµã‚Œ
1. **YouTube Data API ã§è¦–è´å±¥æ­´ã‚’å–å¾—**
2. **è¦–è´å±¥æ­´ã‹ã‚‰èˆˆå‘³ã®ã‚ã‚‹å‹•ç”»ã‚’æŠ½å‡º**
3. **å‹•ç”»æƒ…å ±ã‚’å–å¾—**
4. **è¦ç´„ã‚’ç”Ÿæˆ**

---

### Python ã‚³ãƒ¼ãƒ‰

```python
import os
import openai
import pandas as pd
from googleapiclient.discovery import build
from google.oauth2.credentials import Credentials

# OpenAI API ã‚­ãƒ¼ï¼ˆè¦è¨­å®šï¼‰
openai.api_key = "YOUR_OPENAI_API_KEY"

# YouTube Data API è¨­å®š
API_SERVICE_NAME = "youtube"
API_VERSION = "v3"
SCOPES = ["https://www.googleapis.com/auth/youtube.readonly"]

def get_youtube_client():
    """èªè¨¼æ¸ˆã¿ã® YouTube API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—"""
    creds = Credentials.from_authorized_user_file("token.json", SCOPES)
    return build(API_SERVICE_NAME, API_VERSION, credentials=creds)

def get_watch_history(youtube):
    """YouTube ã®è¦–è´å±¥æ­´ã‚’å–å¾—"""
    request = youtube.videos().list(
        part="snippet,statistics",
        myRating="like"  # ä¾‹ã¨ã—ã¦ã€Œé«˜è©•ä¾¡ã—ãŸå‹•ç”»ã€ã‚’å–å¾—
    )
    response = request.execute()
    
    video_data = []
    for item in response.get("items", []):
        video_data.append({
            "videoId": item["id"],
            "title": item["snippet"]["title"],
            "description": item["snippet"]["description"],
            "viewCount": int(item["statistics"].get("viewCount", 0)),
            "likeCount": int(item["statistics"].get("likeCount", 0)),
            "publishedAt": item["snippet"]["publishedAt"]
        })
    
    return pd.DataFrame(video_data)

def get_summary(video_title, video_description):
    """å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„"""
    prompt = f"ä»¥ä¸‹ã®å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„ã—ã¦ãã ã•ã„ã€‚\n\nã‚¿ã‚¤ãƒˆãƒ«: {video_title}\nèª¬æ˜: {video_description}\n\nè¦ç´„:"
    
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[{"role": "user", "content": prompt}]
    )
    
    return response["choices"][0]["message"]["content"]

def main():
    youtube = get_youtube_client()
    
    # è¦–è´å±¥æ­´ã‚’å–å¾—
    history_df = get_watch_history(youtube)
    
    # èˆˆå‘³ãŒã‚ã‚Šãã†ãªå‹•ç”»ã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä¾‹: é«˜è©•ä¾¡ã®å¤šã„é †ï¼‰
    filtered_videos = history_df.sort_values(by="likeCount", ascending=False).head(5)
    
    summaries = []
    for _, row in filtered_videos.iterrows():
        summary = get_summary(row["title"], row["description"])
        summaries.append({"Title": row["title"], "Summary": summary})
    
    # çµæœã‚’è¡¨ç¤º
    summary_df = pd.DataFrame(summaries)
    import ace_tools as tools
    tools.display_dataframe_to_user(name="å‹•ç”»ã®è¦ç´„", dataframe=summary_df)

if __name__ == "__main__":
    main()
```

---

### è§£èª¬
1. **YouTube API ã®èªè¨¼**
   - `token.json` ã‚’ä½¿ã£ã¦ OAuth èªè¨¼ã‚’è¡Œã„ã€API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—

2. **è¦–è´å±¥æ­´ã®å–å¾—**
   - `myRating="like"` ã‚’ä½¿ã„ã€é«˜è©•ä¾¡ã—ãŸå‹•ç”»ã‚’å–å¾—ï¼ˆä»–ã«ã‚‚ `watchHistory` ã‚’å–å¾—å¯èƒ½ï¼‰

3. **èˆˆå‘³ã®ã‚ã‚‹å‹•ç”»ã®æŠ½å‡º**
   - `likeCount` ã§ã‚½ãƒ¼ãƒˆã—ã€ä¸Šä½ 5 ä»¶ã‚’é¸æŠ

4. **å‹•ç”»ã®è¦ç´„**
   - OpenAI API ã‚’ä½¿ã£ã¦å‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„

---

### å®Ÿè¡Œçµæœ
| Title | Summary |
|------|---------|
| Pythonå…¥é–€ | Pythonã®åŸºç¤æ–‡æ³•ã‚’åˆå¿ƒè€…å‘ã‘ã«è§£èª¬ã€‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã®åŸºç¤ã‚’å­¦ã¹ã‚‹å†…å®¹ã€‚ |
| AI ã®æœªæ¥ | AI ã®é€²åŒ–ã¨ä»Šå¾Œã®å½±éŸ¿ã«ã¤ã„ã¦è§£èª¬ã€‚ |

---

### ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
- `myRating="like"` ã‚’ `history` ã«å¤‰æ›´ã™ã‚‹ã¨å…¨è¦–è´å±¥æ­´ã‚’å–å¾—å¯èƒ½
- OpenAI ã®ãƒ¢ãƒ‡ãƒ«ã‚’ `gpt-3.5-turbo` ã«å¤‰æ›´ã™ã‚‹ã¨ã‚³ã‚¹ãƒˆå‰Šæ¸›
- `sort_values(by="viewCount")` ã«å¤‰æ›´ã™ã‚‹ã¨å†ç”Ÿå›æ•°ã®å¤šã„å‹•ç”»ã‚’è¦ç´„

ã“ã‚Œã§ YouTube ã®å±¥æ­´ã‹ã‚‰èˆˆå‘³ã®ã‚ã‚Šãã†ãªå‹•ç”»ã®è¦ç´„ã‚’ä½œæˆã§ãã¾ã™ï¼

### user â€” 2025-02-01T09:30:25.249801+00:00

å†åº¦ææ¡ˆ

### assistant â€” 2025-02-01T09:30:58.648368+00:00

YouTube ã®è¦–è´å±¥æ­´ã‹ã‚‰èˆˆå‘³ã®ã‚ã‚Šãã†ãªå‹•ç”»ã‚’åˆ†æã—ã€è¦ç´„ã‚’ä½œæˆã™ã‚‹ Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ææ¡ˆã—ã¾ã™ã€‚

---

### **æ¦‚è¦**
1. **YouTube ã®å±¥æ­´ã‚’å–å¾—**
   - **Google Takeout** ã‚’åˆ©ç”¨ã—ã¦å±¥æ­´ãƒ‡ãƒ¼ã‚¿ (`watch-history.json`) ã‚’å–å¾—
   - **YouTube Data API** ã‚’ä½¿ã£ã¦å±¥æ­´ã‚’å–å¾—ï¼ˆè¦ OAuth èªè¨¼ï¼‰

2. **èˆˆå‘³ã®ã‚ã‚‹å‹•ç”»ã‚’åˆ†æ**
   - è¦–è´å›æ•°ã®å¤šã„å‹•ç”»
   - é•·æ™‚é–“è¦–è´ã—ãŸå‹•ç”»
   - é«˜è©•ä¾¡ã—ãŸå‹•ç”»

3. **å‹•ç”»ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—**
   - YouTube Data API ã§å‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ãƒ»å†ç”Ÿå›æ•°ãƒ»ã„ã„ã­æ•°ãªã©ã‚’å–å¾—

4. **è¦ç´„ã‚’ä½œæˆ**
   - OpenAI APIï¼ˆGPT-4ï¼‰ã‚’ä½¿ã£ã¦å‹•ç”»èª¬æ˜ã‚’è¦ç´„

---

## **æ–¹æ³• 1: Google Takeout ã®å±¥æ­´ã‚’åˆ†æ**
Google Takeout ã§ `watch-history.json` ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã€ãƒ­ãƒ¼ã‚«ãƒ«ã§å‡¦ç†ã™ã‚‹æ–¹æ³•ã€‚

### **æ‰‹é †**
1. **Google Takeout** ã§ YouTube ã®è¦–è´å±¥æ­´ (`watch-history.json`) ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
2. `watch-history.json` ã‚’ Python ã§è§£æ
3. **é »ç¹ã«è¦–è´ã™ã‚‹ã‚¸ãƒ£ãƒ³ãƒ«ã‚„å‹•ç”»ã‚’ç‰¹å®š**
4. **å‹•ç”»ã®è¦ç´„ã‚’ä½œæˆ**

### **ã‚³ãƒ¼ãƒ‰**
```python
import json
import pandas as pd
import openai
import re
import requests

# OpenAI API ã‚­ãƒ¼ï¼ˆè¦è¨­å®šï¼‰
openai.api_key = "YOUR_OPENAI_API_KEY"

def load_watch_history(json_path):
    """YouTubeã®è¦–è´å±¥æ­´ã‚’JSONãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã‚€"""
    with open(json_path, "r", encoding="utf-8") as f:
        data = json.load(f)
    
    videos = []
    for entry in data:
        if "title" in entry and "url" in entry:
            video_id = extract_video_id(entry["url"])
            if video_id:
                videos.append({"title": entry["title"], "video_id": video_id, "url": entry["url"]})
    
    return pd.DataFrame(videos)

def extract_video_id(url):
    """YouTube URL ã‹ã‚‰å‹•ç”»IDã‚’æŠ½å‡º"""
    match = re.search(r"v=([a-zA-Z0-9_-]+)", url)
    return match.group(1) if match else None

def get_video_details(video_id):
    """YouTube Data API ã‚’ä½¿ã£ã¦å‹•ç”»ã®èª¬æ˜ã‚’å–å¾—"""
    api_key = "YOUR_YOUTUBE_API_KEY"
    url = f"https://www.googleapis.com/youtube/v3/videos?part=snippet&id={video_id}&key={api_key}"
    response = requests.get(url).json()
    
    if "items" in response and len(response["items"]) > 0:
        snippet = response["items"][0]["snippet"]
        return snippet["title"], snippet["description"]
    return None, None

def summarize_text(title, description):
    """OpenAI API ã‚’ä½¿ã£ã¦å‹•ç”»ã®è¦ç´„ã‚’ç”Ÿæˆ"""
    prompt = f"ä»¥ä¸‹ã®å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚\n\nã‚¿ã‚¤ãƒˆãƒ«: {title}\nèª¬æ˜: {description}\n\nè¦ç´„:"
    
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[{"role": "user", "content": prompt}]
    )
    
    return response["choices"][0]["message"]["content"]

def main():
    history_df = load_watch_history("watch-history.json")
    
    # èˆˆå‘³ã®ã‚ã‚‹å‹•ç”»ã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä¾‹: åŒã˜å‹•ç”»ã‚’è¤‡æ•°å›è¦–è´ã—ã¦ã„ã‚‹ã‚‚ã®ï¼‰
    top_videos = history_df["video_id"].value_counts().head(5).index.tolist()
    
    summaries = []
    for video_id in top_videos:
        title, description = get_video_details(video_id)
        if title and description:
            summary = summarize_text(title, description)
            summaries.append({"Title": title, "Summary": summary})
    
    # çµæœã‚’è¡¨ç¤º
    summary_df = pd.DataFrame(summaries)
    import ace_tools as tools
    tools.display_dataframe_to_user(name="å‹•ç”»ã®è¦ç´„", dataframe=summary_df)

if __name__ == "__main__":
    main()
```

---

### **æ–¹æ³• 2: YouTube Data API ã§å±¥æ­´ã‚’å–å¾—**
YouTube API ã‚’ä½¿ã£ã¦ **OAuth èªè¨¼** ã§è¦–è´å±¥æ­´ã‚’å–å¾—ã™ã‚‹æ–¹æ³•ã€‚

#### **æ‰‹é †**
1. **Google Cloud Console** ã§ YouTube Data API ã‚’æœ‰åŠ¹åŒ–
2. **OAuth 2.0 èªè¨¼** ã‚’è¨­å®š
3. **å±¥æ­´ã‚’å–å¾—**
4. **è¦–è´å›æ•°ãƒ»æ™‚é–“ã«åŸºã¥ã„ã¦èˆˆå‘³ã®ã‚ã‚‹å‹•ç”»ã‚’åˆ†æ**
5. **å‹•ç”»æƒ…å ±ã‚’å–å¾—ã—ã€è¦ç´„**

#### **ã‚³ãƒ¼ãƒ‰**
```python
from googleapiclient.discovery import build
from google.oauth2.credentials import Credentials

# YouTube Data API è¨­å®š
API_SERVICE_NAME = "youtube"
API_VERSION = "v3"
SCOPES = ["https://www.googleapis.com/auth/youtube.readonly"]

def get_youtube_client():
    """èªè¨¼æ¸ˆã¿ã® YouTube API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚’å–å¾—"""
    creds = Credentials.from_authorized_user_file("token.json", SCOPES)
    return build(API_SERVICE_NAME, API_VERSION, credentials=creds)

def get_watch_history(youtube):
    """YouTube ã®è¦–è´å±¥æ­´ã‚’å–å¾—"""
    request = youtube.videos().list(
        part="snippet,statistics",
        myRating="like"  # ä¾‹ã¨ã—ã¦ã€Œé«˜è©•ä¾¡ã—ãŸå‹•ç”»ã€ã‚’å–å¾—
    )
    response = request.execute()
    
    video_data = []
    for item in response.get("items", []):
        video_data.append({
            "videoId": item["id"],
            "title": item["snippet"]["title"],
            "description": item["snippet"]["description"],
            "viewCount": int(item["statistics"].get("viewCount", 0)),
            "likeCount": int(item["statistics"].get("likeCount", 0)),
            "publishedAt": item["snippet"]["publishedAt"]
        })
    
    return pd.DataFrame(video_data)

def main():
    youtube = get_youtube_client()
    
    # è¦–è´å±¥æ­´ã‚’å–å¾—
    history_df = get_watch_history(youtube)
    
    # èˆˆå‘³ãŒã‚ã‚Šãã†ãªå‹•ç”»ã‚’ãƒ•ã‚£ãƒ«ã‚¿ï¼ˆä¾‹: é«˜è©•ä¾¡ã®å¤šã„é †ï¼‰
    filtered_videos = history_df.sort_values(by="likeCount", ascending=False).head(5)
    
    summaries = []
    for _, row in filtered_videos.iterrows():
        summary = summarize_text(row["title"], row["description"])
        summaries.append({"Title": row["title"], "Summary": summary})
    
    # çµæœã‚’è¡¨ç¤º
    summary_df = pd.DataFrame(summaries)
    import ace_tools as tools
    tools.display_dataframe_to_user(name="å‹•ç”»ã®è¦ç´„", dataframe=summary_df)

if __name__ == "__main__":
    main()
```

---

### **ã©ã¡ã‚‰ã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ**
| æ–¹æ³• | ãƒ¡ãƒªãƒƒãƒˆ | ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ |
|------|----------|------------|
| **Google Takeout** | ç°¡å˜ã«å±¥æ­´ã‚’å–å¾—å¯èƒ½ã€èªè¨¼ä¸è¦ | æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã§ããªã„ |
| **YouTube API** | ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å±¥æ­´å–å¾—ã€è©³ç´°ãƒ‡ãƒ¼ã‚¿å–å¾—å¯èƒ½ | OAuth èªè¨¼ãŒå¿…è¦ |

**ğŸ’¡ ãŠã™ã™ã‚**
- `Google Takeout` ã¯ **æ‰‹è»½ã«è©¦ã—ãŸã„å ´åˆ**
- `YouTube Data API` ã¯ **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§åˆ†æã—ãŸã„å ´åˆ**

---

### **ã¾ã¨ã‚**
âœ… **è¦–è´å±¥æ­´ã‚’å–å¾—**ï¼ˆGoogle Takeout / YouTube APIï¼‰  
âœ… **èˆˆå‘³ã®ã‚ã‚‹å‹•ç”»ã‚’ç‰¹å®š**ï¼ˆè¦–è´å›æ•°ãƒ»é«˜è©•ä¾¡æ•°ãªã©ï¼‰  
âœ… **è¦ç´„ã‚’ä½œæˆ**ï¼ˆOpenAI API ã§ç°¡æ½”ãªèª¬æ˜ç”Ÿæˆï¼‰  

**ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€èˆˆå‘³ã®ã‚ã‚‹ YouTube å‹•ç”»ã®è¦ç´„ãŒä¸€è¦§ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ï¼**

### user â€” 2025-02-01T09:31:23.723883+00:00

ãŠã™ã™ã‚ã®å‹•ç”»è¦ç´„ã‚’ä½œæˆã™ã‚‹

### assistant â€” 2025-02-01T09:31:57.395250+00:00

YouTube ã®è¦–è´å±¥æ­´ã‚„ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’å…ƒã«ã€ãŠã™ã™ã‚ã®å‹•ç”»è¦ç´„ã‚’ä½œæˆã™ã‚‹ Python ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½œæˆã—ã¾ã—ãŸã€‚  

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€YouTube Data API ã‚’åˆ©ç”¨ã—ã¦**ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—**ã—ã€**è¦ç´„ã‚’ç”Ÿæˆ**ã—ã¾ã™ã€‚  

---

## **æ‰‹é †**
1. **YouTube ã®ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—**
   - YouTube Data API ã‚’ä½¿ã£ã¦ã€æ—¥æœ¬ã®ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—
2. **å‹•ç”»ã®è¦ç´„ã‚’ä½œæˆ**
   - OpenAI APIï¼ˆGPT-4ï¼‰ã‚’ä½¿ã£ã¦ã€å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„
3. **çµæœã‚’ãƒªã‚¹ãƒˆè¡¨ç¤º**
   - ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã®ãŠã™ã™ã‚è¦ç´„ã‚’è¡¨ç¤º  

---

## **å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
pip install google-auth google-auth-oauthlib google-auth-httplib2 googleapiclient openai pandas requests
```

---

## **Python ã‚³ãƒ¼ãƒ‰**
```python
import requests
import pandas as pd
import openai

# API ã‚­ãƒ¼è¨­å®š
YOUTUBE_API_KEY = "YOUR_YOUTUBE_API_KEY"
OPENAI_API_KEY = "YOUR_OPENAI_API_KEY"

openai.api_key = OPENAI_API_KEY

def get_trending_videos(region_code="JP", max_results=5):
    """YouTubeã®ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—"""
    url = f"https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&chart=mostPopular&regionCode={region_code}&maxResults={max_results}&key={YOUTUBE_API_KEY}"
    response = requests.get(url).json()
    
    video_data = []
    for item in response.get("items", []):
        video_data.append({
            "videoId": item["id"],
            "title": item["snippet"]["title"],
            "description": item["snippet"]["description"],
            "viewCount": int(item["statistics"].get("viewCount", 0)),
            "likeCount": int(item["statistics"].get("likeCount", 0)),
            "channelTitle": item["snippet"]["channelTitle"]
        })
    
    return pd.DataFrame(video_data)

def summarize_video(title, description):
    """å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„"""
    prompt = f"ä»¥ä¸‹ã®å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚\n\nã‚¿ã‚¤ãƒˆãƒ«: {title}\nèª¬æ˜: {description}\n\nè¦ç´„:"
    
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[{"role": "user", "content": prompt}]
    )
    
    return response["choices"][0]["message"]["content"]

def main():
    trending_videos = get_trending_videos()
    
    summaries = []
    for _, row in trending_videos.iterrows():
        summary = summarize_video(row["title"], row["description"])
        summaries.append({
            "Title": row["title"],
            "Channel": row["channelTitle"],
            "Summary": summary
        })
    
    # çµæœã‚’è¡¨ç¤º
    summary_df = pd.DataFrame(summaries)
    import ace_tools as tools
    tools.display_dataframe_to_user(name="ãŠã™ã™ã‚ã®å‹•ç”»è¦ç´„", dataframe=summary_df)

if __name__ == "__main__":
    main()
```

---

## **ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ**
âœ… **ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—**ï¼ˆYouTube Data API `chart=mostPopular`ï¼‰  
âœ… **å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ãƒ»èª¬æ˜ã‚’è¦ç´„**ï¼ˆOpenAI API `gpt-4`ï¼‰  
âœ… **è¦–è´å›æ•°ãƒ»ã„ã„ã­æ•°ã§ãƒ©ãƒ³ã‚­ãƒ³ã‚°å¯èƒ½**ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ¬ãƒ¼ãƒ å‡¦ç†ï¼‰  

---

## **å®Ÿè¡Œçµæœã®ä¾‹**
| Title | Channel | Summary |
|------|---------|---------|
| æœ€æ–°ã®AIæŠ€è¡“ã¾ã¨ã‚ | TechReviewJP | AIã®é€²åŒ–ã¨æœ€æ–°ãƒˆãƒ¬ãƒ³ãƒ‰ã‚’è§£èª¬ã€‚ç‰¹ã«LLMæŠ€è¡“ã®é€²å±•ã«ç„¦ç‚¹ã‚’å½“ã¦ãŸå†…å®¹ã€‚ |
| æ—…è¡ŒVlog: äº¬éƒ½ã®éš ã‚ŒãŸåæ‰€ | TravelWithMe | äº¬éƒ½ã®ç©´å ´ã‚¹ãƒãƒƒãƒˆã‚’ç´¹ä»‹ã€‚è¦³å…‰å®¢ãŒå°‘ãªãã€é™ã‹ã«æ¥½ã—ã‚ã‚‹å ´æ‰€ãŒä¸­å¿ƒã€‚ |

---

### **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**
- **`region_code="US"`** ã«å¤‰æ›´ã™ã‚‹ã¨ã€**ã‚¢ãƒ¡ãƒªã‚«ã®ãƒˆãƒ¬ãƒ³ãƒ‰**ã‚’å–å¾—
- **`max_results=10`** ã«å¤‰æ›´ã™ã‚‹ã¨ã€**ãƒˆãƒƒãƒ— 10 ã®å‹•ç”»**ã‚’å–å¾—
- **`sort_values(by="viewCount")`** ã§ã€**å†ç”Ÿå›æ•°é †ã«ä¸¦ã³æ›¿ãˆ**  

---

ã“ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹ã¨ã€**YouTube ã®ãŠã™ã™ã‚å‹•ç”»ã®è¦ç´„ãŒä¸€è¦§ã§è¡¨ç¤º**ã•ã‚Œã¾ã™ï¼

### user â€” 2025-02-01T09:33:46.669517+00:00

ã“ã®æ©Ÿèƒ½ã®å‘¼ã³å‡ºã—ã‚’éŸ³å£°ã§ãŠã“ãªã†

### assistant â€” 2025-02-01T09:34:23.180482+00:00

YouTube ã®ãŠã™ã™ã‚å‹•ç”»è¦ç´„æ©Ÿèƒ½ã‚’ **éŸ³å£°ã‚³ãƒãƒ³ãƒ‰** ã§å‘¼ã³å‡ºã›ã‚‹ã‚ˆã†ã«ã™ã‚‹ãŸã‚ã«ã€éŸ³å£°èªè­˜ãƒ©ã‚¤ãƒ–ãƒ©ãƒª `SpeechRecognition` ã‚’æ´»ç”¨ã—ã¾ã™ã€‚

---

## **æ‰‹é †**
1. **éŸ³å£°å…¥åŠ›ã‚’å–å¾—**ï¼ˆ`SpeechRecognition`ï¼‰
2. **éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã‚’è§£æã—ã€ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»è¦ç´„ã‚’å‘¼ã³å‡ºã™**
3. **è¦ç´„çµæœã‚’éŸ³å£°ã§å‡ºåŠ›**ï¼ˆ`pyttsx3`ï¼‰

---

## **å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
pip install google-auth google-auth-oauthlib google-auth-httplib2 googleapiclient openai pandas requests SpeechRecognition pyttsx3 pyaudio
```

---

## **Python ã‚³ãƒ¼ãƒ‰**
```python
import requests
import pandas as pd
import openai
import speech_recognition as sr
import pyttsx3

# API ã‚­ãƒ¼è¨­å®š
YOUTUBE_API_KEY = "YOUR_YOUTUBE_API_KEY"
OPENAI_API_KEY = "YOUR_OPENAI_API_KEY"

openai.api_key = OPENAI_API_KEY

# éŸ³å£°ã‚¨ãƒ³ã‚¸ãƒ³ã®è¨­å®š
engine = pyttsx3.init()

def speak(text):
    """éŸ³å£°ã§å‡ºåŠ›"""
    engine.say(text)
    engine.runAndWait()

def listen():
    """ãƒã‚¤ã‚¯ã‹ã‚‰éŸ³å£°ã‚’å–å¾—ã—ã€ãƒ†ã‚­ã‚¹ãƒˆã«å¤‰æ›"""
    recognizer = sr.Recognizer()
    with sr.Microphone() as source:
        print("éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã‚’ã©ã†ã...")
        recognizer.adjust_for_ambient_noise(source)
        audio = recognizer.listen(source)

    try:
        command = recognizer.recognize_google(audio, language="ja-JP")
        print(f"èªè­˜ã—ãŸã‚³ãƒãƒ³ãƒ‰: {command}")
        return command.lower()
    except sr.UnknownValueError:
        print("éŸ³å£°ãŒèªè­˜ã§ãã¾ã›ã‚“ã§ã—ãŸã€‚ã‚‚ã†ä¸€åº¦è©±ã—ã¦ãã ã•ã„ã€‚")
        return None
    except sr.RequestError:
        print("éŸ³å£°èªè­˜ã‚µãƒ¼ãƒ“ã‚¹ã«æ¥ç¶šã§ãã¾ã›ã‚“ã€‚")
        return None

def get_trending_videos(region_code="JP", max_results=3):
    """YouTubeã®ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—"""
    url = f"https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&chart=mostPopular&regionCode={region_code}&maxResults={max_results}&key={YOUTUBE_API_KEY}"
    response = requests.get(url).json()
    
    video_data = []
    for item in response.get("items", []):
        video_data.append({
            "videoId": item["id"],
            "title": item["snippet"]["title"],
            "description": item["snippet"]["description"],
            "channelTitle": item["snippet"]["channelTitle"]
        })
    
    return pd.DataFrame(video_data)

def summarize_video(title, description):
    """å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„"""
    prompt = f"ä»¥ä¸‹ã®å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’ç°¡æ½”ã«è¦ç´„ã—ã¦ãã ã•ã„ã€‚\n\nã‚¿ã‚¤ãƒˆãƒ«: {title}\nèª¬æ˜: {description}\n\nè¦ç´„:"
    
    response = openai.ChatCompletion.create(
        model="gpt-4",
        messages=[{"role": "user", "content": prompt}]
    )
    
    return response["choices"][0]["message"]["content"]

def handle_command(command):
    """éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã«å¿œã˜ã¦å‡¦ç†ã‚’å®Ÿè¡Œ"""
    if "ãŠã™ã™ã‚ã®å‹•ç”»" in command or "ãƒˆãƒ¬ãƒ³ãƒ‰" in command:
        speak("ãŠã™ã™ã‚ã®å‹•ç”»ã‚’å–å¾—ã—ã¦ã„ã¾ã™ã€‚å°‘ã—ãŠå¾…ã¡ãã ã•ã„ã€‚")
        
        trending_videos = get_trending_videos()
        summaries = []
        
        for _, row in trending_videos.iterrows():
            summary = summarize_video(row["title"], row["description"])
            summaries.append({
                "Title": row["title"],
                "Channel": row["channelTitle"],
                "Summary": summary
            })
        
        # çµæœã‚’è¡¨ç¤º
        summary_df = pd.DataFrame(summaries)
        import ace_tools as tools
        tools.display_dataframe_to_user(name="ãŠã™ã™ã‚ã®å‹•ç”»è¦ç´„", dataframe=summary_df)
        
        # éŸ³å£°ã§è¦ç´„ã‚’èª­ã¿ä¸Šã’
        for item in summaries:
            speak(f"å‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«: {item['Title']}ã€‚{item['Summary']}")

    else:
        speak("ã™ã¿ã¾ã›ã‚“ã€ãã®ã‚³ãƒãƒ³ãƒ‰ã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚")

def main():
    speak("éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã‚’ã©ã†ãã€‚")
    command = listen()
    if command:
        handle_command(command)

if __name__ == "__main__":
    main()
```

---

## **ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ**
âœ… **éŸ³å£°å…¥åŠ›ã§ã‚³ãƒãƒ³ãƒ‰ã‚’èªè­˜**ï¼ˆ`SpeechRecognition`ï¼‰  
âœ… **ã€ŒãŠã™ã™ã‚ã®å‹•ç”»ã€ã¨è©±ã™ã¨ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—**  
âœ… **å‹•ç”»ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„ï¼ˆGPT-4ï¼‰**  
âœ… **éŸ³å£°ã§è¦ç´„ã‚’èª­ã¿ä¸Šã’ï¼ˆ`pyttsx3`ï¼‰**  

---

## **å®Ÿè¡Œä¾‹**
### **éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›**
ğŸ¤ **ã€ŒãŠã™ã™ã‚ã®å‹•ç”»ã‚’æ•™ãˆã¦ã€**

### **ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å‹•ä½œ**
1. **YouTube ã®ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã‚’å–å¾—**
2. **ã‚¿ã‚¤ãƒˆãƒ«ã¨èª¬æ˜ã‚’è¦ç´„**
3. **çµæœã‚’ç”»é¢ã«è¡¨ç¤º & éŸ³å£°ã§èª­ã¿ä¸Šã’**

### **éŸ³å£°å‡ºåŠ›ã®ä¾‹**
ğŸ”Š **ã€Œå‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«: AI ã®æœªæ¥ã€‚AI ã®é€²åŒ–ã¨ä»Šå¾Œã®å½±éŸ¿ã«ã¤ã„ã¦è§£èª¬ã€‚ã€**  
ğŸ”Š **ã€Œå‹•ç”»ã‚¿ã‚¤ãƒˆãƒ«: äº¬éƒ½ã®éš ã‚ŒãŸåæ‰€ã€‚è¦³å…‰å®¢ãŒå°‘ãªã„é™ã‹ãªç©´å ´ã‚¹ãƒãƒƒãƒˆã‚’ç´¹ä»‹ã€‚ã€**

---

## **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**
ğŸ¯ **ã‚³ãƒãƒ³ãƒ‰ã‚’è¿½åŠ **
- **ã€Œã‚¢ãƒ¡ãƒªã‚«ã®ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»ã€** â†’ `region_code="US"` ã«å¤‰æ›´
- **ã€Œã‚²ãƒ¼ãƒ ã®å‹•ç”»ã€** â†’ `category="Gaming"` ã‚’ YouTube API ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«è¿½åŠ   

ğŸ’¡ **éŸ³å£°ã§æ¤œç´¢ã‚‚å¯èƒ½**
- `command` ã« **ã€ŒPython ã®å‹•ç”»ã‚’æ¢ã—ã¦ã€** â†’ **æ¤œç´¢ API ã‚’å®Ÿè£…**

---

## **ã¾ã¨ã‚**
âœ… **éŸ³å£°ã‚³ãƒãƒ³ãƒ‰ã§ãƒˆãƒ¬ãƒ³ãƒ‰å‹•ç”»è¦ç´„ã‚’å–å¾—**  
âœ… **éŸ³å£°èªè­˜ + AI è¦ç´„ + éŸ³å£°å‡ºåŠ›ã‚’çµ±åˆ**  
âœ… **å®Ÿè¡Œã™ã‚‹ã ã‘ã§ YouTube ã®ãŠã™ã™ã‚å‹•ç”»ã‚’éŸ³å£°ã§æ•™ãˆã¦ãã‚Œã‚‹ï¼**

ğŸ¤ **ã€ŒãŠã™ã™ã‚ã®å‹•ç”»ã‚’æ•™ãˆã¦ã€ã¨è©±ã›ã°ã€éŸ³å£°ã§çµæœã‚’è¿”ã™** ã‚¹ãƒãƒ¼ãƒˆãªã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã™ï¼
