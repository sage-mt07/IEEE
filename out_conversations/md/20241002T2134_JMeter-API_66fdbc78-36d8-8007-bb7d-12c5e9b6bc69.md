---
conversation_id: "66fdbc78-36d8-8007-bb7d-12c5e9b6bc69"
title: "JMeter APIレスポンスタイム計測"
create_time: 1727904888.457493
update_time: 1727904899.953424
language_guess: "en"
num_messages: 5
part_index: 1
part_count: 1
---

### system — 2024-10-02T21:34:48.457493+00:00

_(empty)_

### user — 2024-10-02T21:34:48.462152+00:00

jmeterで複数のAPI呼び出しをまとめてレスポンスタイムとして出力する方法

### assistant — 2024-10-02T21:34:58.927789+00:00

_(empty)_

### assistant — 2024-10-02T21:34:58.927909+00:00

JMeterで複数のAPI呼び出しをまとめてレスポンスタイムを出力する方法は、サンプラーのグループ全体のレスポンスタイムを一つにまとめることです。これを実現するには、以下の手順を試してみてください。

### 方法1: Transaction Controllerの利用
1. **Transaction Controller** を使用する方法が最も簡単です。これにより、複数のAPI呼び出しの合計レスポンスタイムを1つのトランザクションとしてまとめて測定できます。
   
2. JMeterスクリプト内で、 **Transaction Controller** を追加します。
   - `Thread Group`を右クリックし、`Add > Logic Controller > Transaction Controller`を選択します。

3. Transaction Controllerの下に、複数のAPI呼び出しサンプラー（`HTTP Request`）を追加します。

4. `Transaction Controller`のプロパティで、「`Generate parent sample`」にチェックを入れます。これにより、サブサンプラーの合計時間が出力されます。

5. テストを実行すると、Transaction Controller内の全てのリクエストのレスポンスタイムをまとめた値が1つのサンプルとして結果に出力されます。

### 方法2: タイムスタンプの手動計測
もし、もっと柔軟に制御したい場合は、以下のように **BeanShell PreProcessor** や **PostProcessor** を使って開始・終了時間を手動で計測することも可能です。

1. テスト開始前に**BeanShell PreProcessor**でタイムスタンプを取得します。

```java
long startTime = System.currentTimeMillis();
vars.put("startTime", Long.toString(startTime));
```

2. 全てのAPI呼び出しが完了した後に**BeanShell PostProcessor**で終了時間を取得し、合計時間を計算します。

```java
long startTime = Long.parseLong(vars.get("startTime"));
long endTime = System.currentTimeMillis();
long responseTime = endTime - startTime;
log.info("Total Response Time: " + responseTime + " ms");
```

この方法では、各サンプラーの前後で手動でタイムスタンプを取ることができますが、単純に全体のレスポンスタイムを計測する場合は**Transaction Controller**が最適です。

この方法を試して、目的に合ったレスポンスタイムの計測ができるか確認してみてください。
