---
conversation_id: "672bb392-ea40-8007-af59-f9194fe567f3"
title: "SQLServer パーセンタイル 取得 方法"
create_time: 1730917267.076713
update_time: 1730917307.818772
language_guess: "en"
num_messages: 7
part_index: 1
part_count: 1
---

### system — 2024-11-06T18:21:07.076713+00:00

_(empty)_

### user — 2024-11-06T18:21:07.084809+00:00

SQLServerでpercentileを取得する方法

### assistant — 2024-11-06T18:21:31.716735+00:00

_(empty)_

### assistant — 2024-11-06T18:21:31.716850+00:00

SQL Serverでパーセンタイルを取得する方法として、`PERCENTILE_CONT`または`PERCENTILE_DISC`関数を使う方法があります。これらの関数は、パーセンタイルを指定した割合で計算し、クエリで取得できます。

以下に例を示します。

### `PERCENTILE_CONT`を使用する方法

`PERCENTILE_CONT`は連続的なパーセンタイル値を取得します。例えば、90パーセンタイルなどの特定のパーセンタイルを取得する場合に便利です。

```sql
SELECT 
    PERCENTILE_CONT(0.9) WITHIN GROUP (ORDER BY 列名) AS Percentile_90
FROM テーブル名;
```

### `PERCENTILE_DISC`を使用する方法

`PERCENTILE_DISC`は、不連続のパーセンタイル値を取得します。つまり、パーセンタイルに最も近いデータの実際の値を返します。

```sql
SELECT 
    PERCENTILE_DISC(0.9) WITHIN GROUP (ORDER BY 列名) AS Percentile_90
FROM テーブル名;
```

### グループ化してパーセンタイルを計算する場合

`PARTITION BY`句を使ってグループごとのパーセンタイルを計算することも可能です。

```sql
SELECT 
    グループ列,
    PERCENTILE_CONT(0.9) WITHIN GROUP (ORDER BY 列名) OVER (PARTITION BY グループ列) AS Percentile_90
FROM テーブル名;
```

### 注意事項
- `PERCENTILE_CONT`および`PERCENTILE_DISC`は、**SQL Server 2012以降**で利用可能です。
- パーセンタイルの値は、`0`から`1`の範囲で指定します（例：90パーセンタイルは`0.9`）。

このようにして、SQL Serverで簡単にパーセンタイルを計算できます。

### user — 2024-11-06T18:21:43.213636+00:00

この関数はどのバージョンから利用できるのか

### assistant — 2024-11-06T18:21:47.048135+00:00

`PERCENTILE_CONT`および`PERCENTILE_DISC`関数は、**SQL Server 2012**以降のバージョンで利用可能です。これらの関数は、ウィンドウ関数の一部として導入され、データのパーセンタイル計算に使用できます。
