---
conversation_id: "68ee2a7a-7778-8320-8aeb-74d2da616dc9"
title: "ブランチ運用案提案"
create_time: 1760438908.628758
update_time: 1760439364.605339
language_guess: "en"
num_messages: 11
part_index: 1
part_count: 1
---

### user — 2025-10-14T10:48:24.352000+00:00

以下のリポジトリがある
https://github.com/synthaicode/Kafka.Ksql.Linq
https://github.com/synthaicode/synthaicode.github.io
https://github.com/synthaicode/synthaicode-com
Kafka.Ksql.Linqにソースを配置する
ttps://github.com/synthaicode/synthaicode.github.io　これはsynthaicode.org用リポジトリ
https://github.com/synthaicode/synthaicode-com　これはsynthaicode.com用リポジトリ

Kafka.Ksql.Linqのブランチ構成
rcとしてリリースする
物理テスト後、ドキュメント整備、ソース整備、などフォルダ単位の整備用ブランチを作成する
案を教えて

### system — 2025-10-14T10:48:28.628758+00:00

_(empty)_

### system — 2025-10-14T10:48:28.628758+00:00

_(empty)_

### system — 2025-10-14T10:48:34.198566+00:00

_(empty)_

### system — 2025-10-14T10:48:34.214530+00:00

_(empty)_

### assistant — 2025-10-14T10:48:34.225100+00:00

_(empty)_

### assistant — 2025-10-14T10:48:34.391766+00:00

_(empty)_

### assistant — 2025-10-14T10:48:52.604292+00:00

司令、了解。Kafka.Ksql.Linq の**RC公開→物理テスト→整備（フォルダ単位）**までを綺麗に回すためのブランチ運用案です。最小構成で回しやすく、後から拡張もしやすい形にしています。

# 推奨ブランチ構成（Kafka.Ksql.Linq）

## 恒常ブランチ（長寿命）
- `main`  
  - 常に「リリース品質」。**タグ打ちされたもののみ配布対象**（NuGet/Release）。  
  - 直接コミット禁止。**PR必須＋CIグリーン**＋レビュー（最低1）。
- `develop`（任意。トランク開発なら省略可）  
  - **機能統合の一時滞留先**。頻繁にリベース＆スカッシュ前提。  
  - RC切り出しは `develop` から。

> トランク開発を徹底するなら `develop` を省き、**`main` を唯一の統合ブランチ**にして、短命トピックブランチのみで回すのもOKです（司令の運用負荷の低さ重視ならこちら）。

## RC／安定化ブランチ（中寿命）
- `release/v0.1.0-rc`（例）  
  - RCフェーズの**安定化専用**。ここで**物理テスト修正／軽微なバグ修正のみ**許可。  
  - RCタグを段階的に付与：`v0.1.0-rc.1`, `v0.1.0-rc.2`, …  
  - 最終OKで `main` にマージして**正式版タグ** `v0.1.0` を打つ（`develop` も使うなら逆方向マージで整合）。

## 短命トピックブランチ（作業単位）
命名は**目的＋領域**で機械も人も読める形に統一します。

- 機能追加：`feat/<area>-<slug>`  
  - 例：`feat/query-tumbling-runtime`, `feat/ksqldb-8x-compat`
- バグ修正：`fix/<area>-<slug>`
- パフォーマンス：`perf/<area>-<slug>`
- 破壊的変更：`breaking/<area>-<slug>`
- 雑務／掃除：`chore/<area>-<slug>`

### 「フォルダ単位の整備」専用ブランチ
> ドキュメント整備、ソース整備、物理テスト整備を**並行化**して安全に進めるための型

- ドキュメント整備：`docs/<folder>-tidy-<slug>`  
  - 例：`docs/readme-tidy-rc01`, `docs/cookbook-api-polish`
- ソース整備（リファクタ）：`refactor/<folder>-<slug>`  
  - 例：`refactor/src-query-builders-split`, `refactor/runtime-mapping-clean`
- 物理テスト整備：`tests/physical/<folder>-<slug>`  
  - 例：`tests/physical/timebucket-import-tumbling`, `tests/physical/bar-pipeline-ohlc`

> **原則**：整備系は**機能開発と混ぜない**。レビュー観点を分離し、RC期のリスクを下げます。

---

# リリース／タグ運用

- RCタグ：`vX.Y.Z-rc.N`（例：`v0.1.0-rc.1`）  
  - `release/*` ブランチのスナップショットごとに付与（GitHub Release は **Pre-release** に設定）。
- 正式版タグ：`vX.Y.Z`  
  - `main` にマージ後、CIでビルド・署名・NuGet公開（必要なら）。  
- ホットフィックス：`hotfix/vX.Y.Z+1` → `main` / `release/*` / `develop` へ順次反映。

---

# CI/ガードレール（最小セット）

- **必須チェック（PRマージ条件）**  
  - ビルド／単体テスト  
  - 物理テスト（`tests/physical/*` が関与するPRは**物理テストジョブ必須**）  
  - `dotnet format`／`EditorConfig`／`StyleCop`（静的整形・Lint）  
  - **フォルダ境界ガード**：`docs/*` 変更で `src/*` を触ったら警告（整備分離の徹底）
- **ブランチ保護**  
  - `main`: 直コミット禁止、管理者もPR経由、必須チェック完了、最小1レビュー  
  - `release/*`: 直コミット禁止、必須チェック完了、ラベル `type:stabilize` 必須

---

# PR運用ルール（短く・厳しめ）

- **小さく出す**：100–300行程度を目安（レビュー可読性優先）  
- **ラベル必須**：`type:feat|fix|docs|refactor|perf|chore|tests-physical` など  
- **スコープ厳守**：フォルダ整備PRに機能追加を混ぜない  
- **レビュー役**：  
  - 実装系：鳴瀬（設計）→司令（最終）  
  - 批判的レビュー：鏡花  
  - ドキュメント：くすのき

---

# 典型フロー（例：v0.1.0 RC）

1. （開発）`feat/*`, `refactor/*`, `tests/physical/*` を **develop（or main）** に統合  
2. （凍結）`release/v0.1.0-rc` を切る  
3. （安定化）物理テストで炙り出し → 修正は `fix/*` を **release** に向けてPR  
4. （整備並行）  
   - ドキュメント整備：`docs/*` → `release/*` へ  
   - ソース整備（非機能）：`refactor/*` → **原則 release へは入れない**（必要最小限のみ）  
5. （RC刻み）`v0.1.0-rc.1`, `.2`, … を付与  
6. （正式化）`release/*` → `main` マージ、タグ `v0.1.0`、リリース作成（Pre-release解除）  
7. （整合）`main` → `develop` へ逆マージ（develop運用時）

---

# 命名・粒度のガイド

- **領域プリフィックス**（例）  
  - `src-query/`, `src-runtime/`, `src-serdes/`, `src-mapping/`  
  - `tests-unit/`, `tests-integration/`, `tests-physical/`  
  - `docs/`, `infra/`（CI/CD）
- **ブランチ名は 3要素**：`<kind>/<area>-<slug>`  
  - 例：`feat/src-runtime-windowed-key-deser`  
- **RC期の原則**：  
  - 新機能＝禁止／延期  
  - 仕様変更＝禁止（後方互換を壊すなら次バージョンへ）  
  - バグ修正・ログ強化・テスト強化のみ

---

# 最小コマンド例（参考）
```bash
# RC切り出し
git checkout -b release/v0.1.0-rc origin/main
git push -u origin release/v0.1.0-rc

# RCタグ
git tag v0.1.0-rc.1
git push origin v0.1.0-rc.1

# フォルダ整備（ドキュメント）
git checkout -b docs/readme-tidy-rc01 release/v0.1.0-rc
# …編集…
git push -u origin docs/readme-tidy-rc01
# → release へ PR
```

---

# 他リポジトリ（参考の運用だけ一言）
- `synthaicode.github.io`（.org）：`main` 固定運用でOK（PR必須）。RC情報は**リンクのみ**。  
- `synthaicode-com`（.com）：同上。**プロダクト寄りの着地**にしたい場合はラベルやディレクトリで分離。

---

必要なら、この案を**リポジトリルートの `CONTRIBUTING.md`／`docs/release.md`／`.github/workflows/*`** まで私が一気通貫で初期化します（PR雛形、ラベル定義、ブランチ保護の具体値まで落とし込み可）。

— 送信日時: [[REDACTED_PHONE]]:00 (JST)

### assistant — 2025-10-14T10:48:52.689164+00:00

_(empty)_

### user — 2025-10-14T10:49:42.985396+00:00

_(empty)_
